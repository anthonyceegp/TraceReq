<div class="container-fluid">
	<div class="row">
		<nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">
			<ul class="nav nav-pills flex-column">
				<li class="nav-item">
          <%= link_to @demand.name, [@project, @demand], class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Artifacts", project_demand_artifacts_path(@project, @demand), class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "New Artifact", new_project_demand_artifact_path(@project, @demand), class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Import Artifacts", import_artifacts_path(@project, @demand), class: "nav-link active" %>
        </li>
        <li class="nav-item">
          <%= link_to "New Relationship", new_project_demand_relationship_path(@project, @demand), class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Demands", project_demands_path(@project), class: "nav-link" %>
        </li>
			</ul>
		</nav>
		<main class="col-sm-9 ml-sm-auto col-md-10 pt-3">
			<h2>Import Artifacts</h2>
			<%= form_with(url: import_artifacts_path(@project, @demand), local: true) do |form| %>
				<div class="table-responsive">
					<table class="table table-striped">
						<thead>
							<tr>
								<th><%= check_box_tag "check_all" %></th>
								<th>Code</th>
								<th>Name</th>
								<th>Description</th>
								<th>Priority</th>
								<th>type</th>
							</tr>
						</thead>

						<tbody>
							<% @artifacts.each do |artifact| %>
							<tr>
								<td><%= form.check_box  :artifact_ids, {multiple: true}, artifact.id, nil %></td>
								<td><%= artifact.code %></td>
								<td><%= artifact.name %></td>
								<td><%= artifact.description %></td>
								<td><%= artifact.priority %></td>
								<td><%= artifact.artifact_type.name %></td>
							</tr>
							<% end %>			
						</tbody>
					</table>
					<%= paginate(@artifacts) %>

					<div class="actions">
						<%= form.submit "Import", class: "btn btn-primary" %>
					</div>
				</div>
			<% end %>
		</main>
	</div>
</div>

<script type="text/javascript">
	$('#check_all').on("click", function(){
		var cbxs = $('input[type="checkbox"]');
		var status = cbxs.slice(0,1).is(':checked'); 
		cbxs.prop("checked", status);
	});
</script>