<div class="container-fluid">
	<div class="row">
		<%= render "layouts/sidebar" %>
		<main class="col-sm-9 ml-sm-auto col-md-10 pt-3">
			<%= render 'layouts/alerts' %>
			<h2><%= @artifact.code_with_name %> (v. <%= @artifact.versions.last.index + 1 %>)</h2>
			<div class="table-responsive">
				<%= form_with url: artifact_reify_path(@project, @demand, @artifact), local: true do |form| %>
					<table class="table table-striped table-hover">
						<thead>
							<tr>
								<th></th>
								<th>Code</th>
								<th>Name</th>
								<th>Type</th>
								<th>Description</th>
								<th>Priority</th>
								<th>Attachment</th>
								<th>Version</th>
								<th>Updated_at</th>
							</tr>
						</thead>
						<tbody>
							<% @versions.each do |v| %>
								<% if v.object != nil %>
									<% object = PaperTrail.serializer.load(v.object) %>
									<tr>
										<td><%= form.radio_button :index, v.index %></td>
										<td><%= object["code"] %></td>
										<td><%= object["name"] %></td>
										<td><%= ArtifactType.find(object["artifact_type_id"]).name %></td>
										<td><%= object["description"] %></td>
										<td><%= object["priority"] %></td>
										<td><%= object["file_file_name"] %></td>
										<td><%= v.index %></td>
										<td><%= object["updated_at"].to_date %></td>
									</tr>
								<% end %>
							<% end %>
						</tbody>
					</table>
					<%= form.submit "Remove and Reify", class: "btn btn-danger" %>
					<%= link_to "Cancel", :back, class: "btn btn-danger", role: "button" %>
				<% end %>
			</div>
		</main>
	</div>
</div>