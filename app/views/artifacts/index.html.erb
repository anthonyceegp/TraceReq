<div class="container-fluid">
  <div class="row">
    <%= render "layouts/sidebar" %>
    <main class="col-sm-9 ml-sm-auto col-md-10 pt-3">
      <%= render "layouts/alerts" %>
      <h2>Artifacts <%= link_to new_project_demand_artifact_path(@project, @demand), title: "New Artifact" do %><%= fa_icon "plus" %><% end %></h2>
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Code</th>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
              <th>Priority</th>
              <th>Created by</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @artifacts.each do |artifact| %>
              <tr class="clickable-row" data-href="<%= project_demand_artifact_path(@project, @demand, artifact) %>">
                <td><%= artifact.code %></td>
                <td><%= artifact.name %></td>
                <td><%= artifact.artifact_type.name %></td>
                <td><%= artifact.description %></td>
                <td><%= artifact.priority %></td>
                <td><%= artifact.user.email.split('@').first %></td>
                <td>
                  <%= link_to [@project, @demand, artifact], method: :delete, data: { confirm: 'Are you sure?' }, class: "float-right" do %>
                    <%= fa_icon "trash" %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <%= paginate(@artifacts) %>
      </div>
    </main>
  </div>
</div>
